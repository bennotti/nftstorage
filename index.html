<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
        <script src="main.js" type="module"></script>
        <link rel="stylesheet" href="styles.css"></link>
    </head>
    <body>
        <div id="background">
            <div id="content" class="centered">
                <h1>Discover how an NFT is actually stored</h1>
                <label htmlFor="main-input">
                    <h3 id="enter-text">
                        Enter an
                        <a href="https://opensea.io/rankings?chain=ethereum" target="_blank">OpenSea</a>
                        or
                        <a href="https://looksrare.org/collections" target="_blank">LooksRare</a>
                        link to an Ethereum NFT.
                    </h3>
                </label>
                <input id="main-input" value="https://opensea.io/assets/ethereum/0x34d85c9cdeb23fa97cb08333b511ac86e1c4e258/61223"/>
                <button id="main-button" type="button">Query the blockchain</button>
                <div id="error-output" hidden=true>
                    <br>
                    Please enter a valid OpenSea or LooksRare URL. For inspiration, click the links above
                    to browse the most valuable NFTs.
                </div>

                <div id="main-output" hidden=true>

                    <div class="centered">
                        <label htmlFor="nft-image"><h2 id="nft-name"></h2></label>
                        <img id="main-image" class="nft-image"></img>
                    </div>

                    <h2>What's stored on the Ethereum Blockchain</h2>
                    <div class="nft-content" id="on-chain">
                        <div id="nft-owner"></div>
                        <div id="nft-location-upper"></div>
                    </div>
                    <br>
                    <div>
                        That's it. The owner owns a link to somewhere off the blockchain.
                    </div>

                    <br>

                    <h2 id="off-chain-heading"></h2>
                    <div>Basically, everything about the NFT! Calling that URL returns:</div>
                    <div class="nft-content" id="off-chain">
                        <div id="nft-traits"></div>
                        <br>
                    </div>
                    <br>
                    <div id="nft-image-info">
                        The purple URL after "image" determines the NFT's image. We used it to retrieve the image at the top of the page.
                    </div>
                    <br>
                    <div id="explanation"></div>
                    <br>
                </div><!-- main output-->

                <div id="cryptopunks-output" hidden=true>
                    <h2 id="nft-name">CryptoPunks</h2>
                    <p>
                        CryptoPunks are a special case NFT, since they were created before "NFT" was even a used term. The Ethereum
                        blockchain stores owns each Cryptopunk. However, the images are not stored there, neither is a pointer or link
                        to the images. They live at
                        <a href="https://www.larvalabs.com/public/images/cryptopunks/punks.png" target="_blank">
                            this link
                        </a>
                        in one giant file, also shown below. Stored on the blockchain is a hash
                        of this image. That means if LarvaLabs, the owner of that link, changes the image, everyone will know that it
                        changed! But a hash isn't enough information to know what the image looks like, so from looking at the CryptoPunks
                        smart contract alone, you can't know what the images are. You just have to know where this image is to know
                        what you own.
                    </p>
                    <p>
                        Years later, LarvaLabs actually did
                        <a target="_blank" href="https://etherscan.io/tx/0xc82aa34310c310463eb9fe7835471f7317ac4b5008034a78c93b2a8a237be228">
                            publish the Punks images to the blockchain.
                        </a>
                        The Ethereum blockchain isn't good at storing large files, so this was only possible because the images are low
                        resolution by design, and by using clever compression. It still
                        <a target="_blank" href="https://etherscan.io/tx/0xc82aa34310c310463eb9fe7835471f7317ac4b5008034a78c93b2a8a237be228">
                            cost $264 to publish them.
                        </a>
                        And since contracts are immutable, the original CryptoPunks contract has no reference to the new contract.
                    </p>
                    <img class="nft-image" src="https://www.larvalabs.com/public/images/cryptopunks/punks.png"></img>

                </div> <!-- cryptopunks-output -->
                <a id="nft-source" target="_blank"></a>
                <div id="footer" hidden=true>
                    <hr>
                    <div class="centered">
                        This website's code is open source on <a target="_blank" href="https://github.com/he1en/WhoOwnsNFT">Github</a>
                    </div>
                </div>
            </div><!-- content-->
        </div><!-- background-->
    </body>
</html>